"use strict";jQuery(document).ready(function(f){var p=null!==window.wc_memberships_frontend?window.wc_memberships_frontend:{};f.fn.select2&&f(".wc-memberships-member-profile-field select").not(".select2-hidden-accessible").select2();var e=f(".wc-memberships-member-profile-field"),s=f(".form-row");function r(e){var i=e.find("span.description");i.is(":visible")||i.prop("aria-hidden",!1).slideDown(250),s.not(e).find(".description").prop("aria-hidden",!0).slideUp(250)}s.not(e).find(".woocommerce-input-wrapper :input").on("keydown click focus",function(){e.find(".description").prop("aria-hidden",!0).slideUp(250)}),e.each(function(){var s=f(this),e=s.find(".description");s.find('.woocommerce-input-wrapper input[type="checkbox"], .woocommerce-input-wrapper input[type="radio"]').off(),e.hide(),s.hasClass("wc-memberships-member-profile-field wc-memberships-member-profile-field-input-file")?s.find("label, .wc-memberships-profile-field-input-file-dropzone").on("click",function(){r(s)}):s.hasClass("wc-memberships-member-profile-field-input-multiselect")?f(this).find("label, .select2-selection").on("click change",function(){r(s)}):(s.hasClass("wc-memberships-member-profile-field-input-select")&&s.find(".select2-selection").on("click change",function(){r(s)}),s.find("input, textarea, select, label").not(".select2-selection").on("keydown click",function(){if(f(this).is("label")){var e=f(this).attr("for"),i=f("#"+e);if(i.is(":text")||i.is("textarea")||i.is("select"))return}r(s)}))}),f(".wc-memberships-member-profile-field-input-file").each(function(){var l=f(this),n=l.find(".wc-memberships-profile-field-input-file-dropzone"),o=l.find(".wc-memberships-profile-field-input-file-preview"),d=l.find(".wc-memberships-profile-field-input-file-upload-progress"),t=l.find(".wc-memberships-profile-field-input-file-feedback"),a=l.find('input[type="hidden"]'),s=a.data("slug"),e={url:p.ajax_url,browse_button:n[0],drop_element:n[0],multi_selection:1<p.max_files,multipart_params:{action:"wc_memberships_upload_profile_field_file",security:p.nonces.profile_field_upload_file,profile_field:s},filters:{max_file_size:p.max_file_size,mime_types:p.mime_types}},r=new plupload.Uploader(e);r.init(),r.bind("Error",function(e,i){var s=p.i18n.upload_error.replace("%1$s",i.code).replace("%2$s",i.message);return t.html(s).removeClass("hide"),d.addClass("hide")}),r.bind("FilesAdded",function(e,i){return t.html("").addClass("hide"),n.addClass("disabled"),d.removeClass("hide"),r.start()}),r.bind("UploadProgress",function(e,i){return d.find(".bar").css("width",i.percent+"%")}),r.bind("FileUploaded",function(e,i,s){var r=f.parseJSON(s.response);return!r||r.errors?(d.addClass("hide"),n.removeClass("disabled"),r&&r.length?void t.html(r.errors.upload_error).removeClass("hide"):void console.log(s.response)):(f("#woocommerce-register-nonce").val(r.security),a.val(r.id).trigger("change"),o.removeClass("hide").find("a.file").prop("href",r.url).text(r.title),n.addClass("hide").removeClass("disabled"),d.addClass("hide").find(".bar").css("width",0),l.find(".moxie-shim").addClass("hide"))}),l.find("a.remove-file").on("click",function(e){e.preventDefault(),o.addClass("hide").find("a.file").prop("href","").text(""),n.removeClass("hide disabled");var i={action:"wc_memberships_remove_profile_field_file",security:p.nonces.profile_field_remove_file,file:a.val(),profile_field:s};return f.post(p.ajax_url,i,function(e){e&&e.success||console.log(e)}).always(function(){a.val("").trigger("change")}),l.find(".moxie-shim").removeClass("hide")})})});